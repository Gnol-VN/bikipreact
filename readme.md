# 1. Component  
The primary unit of React is Component. It is like a function whose Input: props, state, Output: UI.  
But, you don't invoke Component like function, you just use it in HTML, for examples `<Component />`  
Component can manage a private state which is changable data over the lifecycle of the component.

Why does it name "React". React will react to the change in a component state, which means re-rendering the UI.

The HTML is generated by React. So by using react, you don't write HTML template files. 

* **Props input** is **explicit, unchangable**. It is similar to the list of attributes that HTML element can have.  
* **State input** is **internal, changable**. It is the inner data of a component, which makes components stateful.

To display a component in browser, we need to use `ReactDom.render(arg1, arg2)` function.
* arg1: the root component - entry point
* arg2: the DOM element in browser where root component shows

```
// Component Hello
const Hello = () => {
    return <div> Hello react </div>; // this is not HTML, this is JSX. JSX gets compiled by Babel into old ES5 that browser can render 
}

Using Babel, return <div> Hello react </div> will be 
    return React.createElement('div', null, 'Hello react');
```

# 2. State
## 2.1. useState()
useState() function is a HOOK, which means it hooks a stateful state into a component.   
useState() returns a tuple of Getter and Setter.
Inside HTML code, we can execute Javascript in curly bracket {}
```
const Button = () => {
    const [counter, setCounter] = useState(initialValue);
    return <button onClick={FUNCTION_REFERENCE}{counter}</button>
}
```
The FUNCTION_REFERENCE above can be:
* a function name, which is declared somewhere, ex: onClick={printRandomNumber} - without round brackets
* arrow function,  ex: onClick={() => console.log(Math.random())}

The FUNCTION_REFERENCE above is a reference (pointer) to a function, it does **not** invoke the function, so

## 2.2. useEffect()
useEffect() is another HOOK, which is trigger everytime the component re-renders due to just one state changes.
Always **return a function to clean the effect** when useEffect() 
```
useEffect(() => {
    // Do something when component is onMount
    ...


    // When component is going to unMount, we need to clean the effect
    return () => {
        // Code to clean effect
    }
})
```

# 3. Props
In short, props is used when a parent component want to pass something to other components. Something here can be a parent's state (counter),or any parent's functions **(WHICH IS USUALLY A FUNCTION TO CHANGE PARENT'S STATES).** 


If you are in Component_B and want to change **state1** of Component_C, then you can't do it directly like ~~Component_C.state1 = 3~~.
To do that, **state1** must be in a parent Component_A, and Component_A contains Component_B and Component_C.  

This example shows App component pass `counter value (state)` to Display component to display; pass `inc function` to Button component through props.  
Note, if you want to use props in a component, you must declare **props** in component function signature
```
const App = () => {
  const [counter, setCounter] = useState(1);
  const inc = () => {
    setCounter(counter+1);
  }
  return (
    <>
      <Button  onClickHandler={inc}/>
      <Display  number={counter}/>
    </>
  )
}

const Button = (props) => {
	return <button onClick={props.onClickHandler}>+1</button>
}

const Display = (props) => {
  return <div>{props.number}</div>
}


ReactDOM.render(
  <App />,
  document.getElementById('mountNode'),
);
```

# 4. Class component
If you use Class Component, props and state are accessible by `this.props` and `this.state`.
In class component, The state is defined in constructor method. **this.state must be an object**
Class component must have a `render()` function to render the DOM

```
class App extends React.Component {  
    constructor(props){
        super(props); // A Must
        this.state = {
            Key: Value
        }
    }
    render() {
        return <div>{{this.props.myProp1}}</div>
    }
}
```

# Other
### 0. Component design
Before coding, look at UI to see which components we need (box, textinput, label), then we develop our **component tree**.  
A component tree here means which component hold many components; which state/props need to be passed down for shared usage  
In SOLID, `S` means Single Responsibility Principle. That means a component should have a single responsibility only.
### 1. <>
render() function only takes 1 element, not 2 elements in the same level. For example:
```
ReactDOM.render(
    <button />
    <button /> // not two same level div
)
```
What we can do is to have a wrapper div
```
<div>
    <button/>
    <button/>
</div>
```
But, it will create an empty div which is redundant after rendering in HTML. To get rid of this redundant div, we use:
```
<> // which is a shortcut for <React.Fragment> </React.Fragment>
    <button/>
    <button/>
</>
```
### 2. customProp={...} vs customProp="..."
* Use `{...}` to pass number/object 
* Only use `"..."` to pass string

### 3. `this` keyword in arrow function
In regular functions, `this` keyword represented the object that called the function, which could be the window, the document, a button or whatever.

With arrow functions, `this` keyword always represents the object which **defined** the arrow function.

### 4. `.then(CALL_BACK function(response))` to consume a `promise`

### 5. style={{}}
The first bracket is a dynamic JSX expression syntax.  
The second bracket is the object literal.

Besides, since style is an object, it can contain conditional styling, for example:  
` <div style={{color: Math.Rrandom() < 0.5 ? 'green' : 'red'}}></div>`

### 6. Spread syntax
```
const testData = [
    {name: "Long", id: 1},
    {name: "Do", id: 2}
]

<Card {...testData[0]} />
<Card {...testData[1]} />
```

Using spread syntax, all elements of testData will be `props` of Card component 

### 7. Form
`event.preventDefault()` to prevent page reloading 
Use `<Form>` to wrap `<input>` for form validation & required fields.
Full example to log form input to console when hitting enter:
```
const Form = () => { // create custom component Form, not <form> lowercase
    const handleSubmit = () => {
      event.preventDefault();
      console.log(userName);
    }
    const [userName, setUserName] = useState("");
  	return (
    	<form onSubmit={handleSubmit}>
    	  <input type="text"
          placeholder="Github username"
          value={userName}
          onChange={event => setUserName(event.target.value)}
          />
    	</form>
    );
}
```
### 8. Ref
A reference variable that React create and *attach* to an HTML element. 

### 9. Each child in a list would have a unique "key" prop
React wants every child in a list to have a unique property for *sorting if possible*. So we need to have `key` prop in the list.  
For example to render a list of Card
```
<div>
    props.profile.map(profile => <Card key={profile.id} {...profile} />)
</div>
```
  
### 10. Avoid for/while in React
Use `map` & `filter` & `reduce` instead. For example, `map` :
```
for(let i = 0 ; i < n ; i++) {
    <div key={i}> Student {i}</div>
}

change into
[...Array(10)].map((elem, index) =>
    <div className="star" key={index}/>
)

```

### 11. To unmount / remount a component
First, we should keep in mind that the `key` attribute is a unique identity that React uses to identify a component element.  
That means if a key change from 1 to 2, React will see unmount `component with Key1` and mount `component with Key2`.  
For example, to remount `ChildComponent`:
```
const ParentComponent = () => {
    const [key, setKey] = useState('1');
    const remountHandle = () => {
        setKey(key+1)
    }
    
    return
    <> 
        <ChildComponent key={key} />
    </>
}
```

### 12. Import / Export components and utils
A basic component will follow:
```
import ... from ... // to import libraries & component

const MyComponent = (props) => {
    // states
    
    // return
}

export default MyComponent; // to export this component for reusing
```

### 13. CORS
  1. In AAD portal > Authentication, add redirect URI: https://localhost:8903
  2. In frontend, add "proxy" : "https://localhost:8903" into package.json
  3. In frontend, add this statement `Axios.defaults.baseURL=window.location.origin` everytime make a REST request  
  4. In AdalConfig, redirectUri: window.location.origin, // will be resolved as https://localhost:3000  // 3 thousands
